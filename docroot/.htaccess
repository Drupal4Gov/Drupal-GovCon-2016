#
# Apache/PHP/Drupal settings:
#

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Set "protossl" to "s" if we were accessed via https://.  This is used later
  # if you enable "www." stripping or enforcement, in order to ensure that
  # you don't bounce between http and https.
  # RewriteRule ^ - [E=protossl]
  # RewriteCond %{HTTPS} on
  # RewriteRule ^ - [E=protossl:s]

  # Make sure Authorization HTTP header is available to PHP
  # even when running as CGI or FastCGI.
  # RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  # RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} .
  # RewriteCond %{HTTP_HOST} ^drupalgovcon.org [NC]
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]


  # Custom redirects for old hostnames
  # RewriteCond %{HTTP_HOST} ^(www.|)(capitalcamp|drupalgovdays|drupalforgov|capitalcampandgovdays|capitalcamp.prod.acquia-sites)(.org|.com) [NC]
  # RewriteRule ^ https://www.drupalgovcon.org/ [L,R=301]


  # RewriteCond %{HTTPS} off
  # RewriteCond %{HTTP_HOST} !(dgc\d?.vm|govcon.dd|capitalcampdev.prod.acquia-sites.com|capitalcampstg.prod.acquia-sites.com)
  # RewriteCond %{HTTP:X-Forwarded-Proto} !https
  # RewriteRule ^ https://www.drupalgovcon.org%{REQUEST_URI} [L,R=301]

  # Only serve the static site for a particular host. 
  RewriteCond %{HTTP_HOST} ^drupalgovcon\.org$
  # Don't loop anything targeting the actual mask directory, to allow
  # for linked scripts, stylesheets etc in the static HTML
  RewriteCond %{REQUEST_URI} !^/splash-page/
  #Any requests that made it this far are served from the /static/ directory
  RewriteRule ^(.*)$ /splash-page/$1 [PT]

  # See: https://docs.acquia.com/articles/maintaining-static-microsite-alongside-drupals-docroot
</IfModule>
